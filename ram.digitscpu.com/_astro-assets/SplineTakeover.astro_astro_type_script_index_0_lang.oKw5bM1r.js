import{g as e}from"./all.BX7bGCfb.js";import{d as t}from"./utilities.DCWVKFoH.js";import{S as n}from"./ScrollTrigger.C0cpPIj4.js";import"./CSSPlugin.2Fz8jr6P.js";e.registerPlugin(n);let o=null,r=null;const i=()=>{const e=document.querySelector(".hero-animation-container"),t=document.querySelector(".spline-container"),n=document.querySelector(".spline-loader"),o=document.querySelector(".color-overlay"),r=document.querySelector(".hero-vimeo-video"),i=document.querySelector(".background-video"),s=document.querySelector(".agl-fallback");if(!(e&&t&&o&&r&&i))return;const c=()=>{n&&0!==n.getBoundingClientRect().height?(s&&s.remove(),n.style.opacity="0",n.style.transition="opacity 0.5s ease-in",n.offsetHeight,n.style.opacity="1"):s&&s.classList.add("show")};window.setTimeout(c,2e3);let d=0;const u=window.setInterval((()=>{d++,c(),n&&0!==n.getBoundingClientRect().height&&window.clearInterval(u),d>=16&&window.clearInterval(u)}),500);a(o,r),l(e,t,o,r,i)},a=(e,t)=>{e.style.pointerEvents="none",n.create({start:0,end:1,onLeave:()=>{e.style.pointerEvents="auto",t.style.pointerEvents="auto"},onEnterBack:()=>{e.style.pointerEvents="none",t.style.pointerEvents="none"}})},l=(t,n,i,a,l)=>{n.style.transformOrigin="center calc(50% - 70px)";const s=document.querySelector(".vimeo-iframe"),c=()=>!(!window.Vimeo||!s)&&(r=new window.Vimeo.Player(s),r.setMuted(!0).catch((()=>{})),r.setCurrentTime(0).catch((()=>{})),r.pause().catch((()=>{})),!0);if(s&&!c()){let e=0;const t=20,n=window.setInterval((()=>{e++,(c()||e>=t)&&window.clearInterval(n)}),100)}const d=e.timeline({scrollTrigger:{trigger:t,start:"top-=70px top",end:"+=1500px",scrub:!0,pin:!0,pinSpacing:!0,onUpdate:e=>{e.progress>.7&&r&&r.play().catch((e=>{})),e.progress<.5&&r&&(r.setCurrentTime(0).catch((e=>{})),r.pause().catch((e=>{})))},onEnter:()=>{r&&r.setCurrentTime(0).catch((e=>{}))},onLeaveBack:()=>{r&&r.pause().catch((e=>{}))}}});o=d.scrollTrigger,d.to(n,{scale:10.5,duration:1,ease:"power1.inOut"},0).to([n,i,l],{opacity:0,duration:.5,ease:"power1.inOut"},.7).to(a,{opacity:1,duration:.5,ease:"power1.inOut"},.8)},s=t((()=>{o&&(o.kill(),o=null),window.innerWidth>=768?i():window.setTimeout(c,2e3)}),250),c=()=>{const e=document.querySelector(".spline-loader"),t=document.querySelector(".agl-fallback");e&&0!==e.getBoundingClientRect().height?(t&&t.remove(),e.style.opacity="1"):t&&t.classList.add("show")},d=()=>{window.innerWidth>=768?i():window.setTimeout(c,2e3),window.addEventListener("resize",s)},u=()=>{window.removeEventListener("resize",s),o&&(o.kill(),o=null),r=null};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d(),window.addEventListener&&window.addEventListener("beforeunload",u);
